%ul.x-navigation
  %li.xn-logo
    = link_to para.admin_path do
      A
      %span.xn-text
        dministration
    %a.x-navigation-control{:href => "#"}

  - if can? :create, Para::Component::Base  
    %li.xn-title Component
    %li.xn-openable
      = link_to '#', class: '' do
        %i.fa.fa-plus
        %span.xn-text
          = t('para.component.add_a_component')  
      %ul
        %li.xn-form
          = simple_form_for Para::Component::Base.new, as: :component, url: para.admin_components_path do |form|
            = form.input :name
            = form.input :component_section_id, collection: Para::ComponentSection.all, include_blank: false
            = form.input :type, collection: registered_components_options, include_blank: false
            = form.button :submit
            
  %li.xn-title Navigation
  - if (component_sections = Para::ComponentSection.ordered).any?
    - component_sections.all.each do |component_section|
      // TODO 
      // Il faudrais pouvoir faire la diff√©rence entre un component_section qui contient un seul 
      // component et un component_section qui contien plusieur de component.
      // Ici il faut ajouter un 'active' si l'un des component enfant est active.
      %li.xn-openable
        = link_to "#", class: '' do
          = component_section.name
        %ul  
          - component_section.components.each do |component|
            - active = request.url.split('/').pop == component.slug
            %li{ class: active && 'active' }
              = link_to component.name, component_path(component)   
             
  - else
    %li.xn-title.text-info
      %span.xn-text
        = t('para.component.none_created')
